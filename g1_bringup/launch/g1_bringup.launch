<launch>
     <arg name="use_jsp" default="jsp"
        description="Choose the joint state publisher mode : 'gui','jsp', or 'none'"/>

    <node pkg="robot_state_publisher" exec="robot_state_publisher">
        <param name="robot_description" value="$(command '$(exec-in-pkg xacro xacro) $(find-pkg-share g1_bringup)/urdf/g1_29dof.urdf') " />
    </node>
    <node pkg="rviz2" exec="rviz2" on_exit="shutdown" args="-d $(find-pkg-share g1_bringup)/config/g1.rviz"/>
    
    <node pkg="joint_state_publisher_gui" exec="joint_state_publisher_gui" if="$(eval '\'$(var use_jsp)\'==\'gui\'')"/>
    <node pkg="joint_state_publisher" exec="joint_state_publisher" if="$(eval '\'$(var use_jsp)\'==\'jsp\'')"/>

</launch>